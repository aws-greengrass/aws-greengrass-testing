#
# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0
#

---
RecipeFormatVersion: 2020-01-25
ComponentName: aws.greengrass.secretComponent
ComponentVersion: '1.0.0'
ComponentDescription: This is Secret component.
ComponentPublisher: Amazon
ComponentConfiguration:
  DefaultConfiguration:
    secretName: EGUAT-OTF
    secretLabel:
    secretVersion:
    accessControl:
      aws.greengrass.SecretManager:
        policyId1:
          policyDescription: access to secret
          operations:
            - 'aws.greengrass#GetSecretValue'
          resources:
            - '*'
ComponentDependencies:
  aws.greengrass.SecretManager:
    VersionRequirement: ">=0.0.0"
    DependencyType: HARD
Manifests:
  - Artifacts:
      - URI: classpath:/greengrass/components/artifacts/aws-greengrass-testing-features-secret.zip
        Unarchive: ZIP
        Permission:
          Read: ALL
          Execute: ALL
    Lifecycle:
      Run: |
        java -Dipc.operation="secretManager" -DcomponentName="aws.greengrass.secretComponents" -jar {artifacts:decompressedPath}/aws-greengrass-testing-features-secret/aws-greengrass-testing-features-secret/ggipc-component.jar {configuration:/secretName}